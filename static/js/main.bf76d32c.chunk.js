(this["webpackJsonpvizzuality-challenge"]=this["webpackJsonpvizzuality-challenge"]||[]).push([[0],{25:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var i=n(2),s=n.n(i),a=n(4),l=n.n(a),o=(n(25),n(14)),c=n(15),r=n(5),d=n(20),h=n(18),j=n(6),u=n(17),f=n(1),g=[{name:"show",content:Object(f.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4261 2.01422L2.5 13.9403L1.08579 12.5261L2.74228 10.8696C1.60654 9.90038 0.664123 8.70981 0 7.52612C1.53263 4.79445 4.54737 2.02612 8 2.02612C9.02535 2.02612 10.0108 2.26908 10.9298 2.68208L13.0119 0.600006L14.4261 2.01422ZM9.55757 4.05434C9.08227 3.83854 8.55492 3.71843 8 3.71843C5.90956 3.71843 4.21053 5.42292 4.21053 7.52612C4.21053 8.07752 4.32731 8.60152 4.53731 9.07459L5.90247 7.70944C5.89735 7.64903 5.89474 7.58789 5.89474 7.52612C5.89474 6.35547 6.83245 5.41073 8 5.41073C8.06493 5.41073 8.12914 5.41365 8.19253 5.41937L9.55757 4.05434Z",fill:"#393F44"}),Object(f.jsx)("path",{d:"M16 7.52612C15.4856 6.60926 14.8052 5.68827 13.9972 4.86921L11.766 7.10041C11.7815 7.24017 11.7895 7.38221 11.7895 7.52612C11.7895 9.62932 10.0904 11.3338 8 11.3338C7.8506 11.3338 7.7032 11.3251 7.55827 11.3082L6.11317 12.7533C6.72218 12.929 7.35341 13.0261 8 13.0261C11.4611 13.0261 14.4674 10.2578 16 7.52612Z",fill:"#393F44"})]})},{name:"hide",content:Object(f.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.89474 7.5C5.89474 8.67065 6.83245 9.61538 8 9.61538C9.16755 9.61538 10.1053 8.67065 10.1053 7.5C10.1053 6.32935 9.16755 5.38462 8 5.38462C6.83245 5.38462 5.89474 6.32935 5.89474 7.5ZM16 7.5C14.4674 4.76833 11.4611 2 8 2C4.54737 2 1.53263 4.76833 0 7.5C1.53263 10.2317 4.54737 13 8 13C11.4611 13 14.4674 10.2317 16 7.5ZM8 3.69231C10.0904 3.69231 11.7895 5.3968 11.7895 7.5C11.7895 9.6032 10.0904 11.3077 8 11.3077C5.90956 11.3077 4.21053 9.6032 4.21053 7.5C4.21053 5.3968 5.90956 3.69231 8 3.69231Z",fill:"#393F44"})})},{name:"arrow-down",content:Object(f.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.23715 9.19583L13 4L14.4743 5.35145L8.23715 12.1556L2 5.35145L3.47431 4L8.23715 9.19583Z",fill:"#393F44"})})},{name:"info",content:Object(f.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15ZM6 7H9V11H10V12H6V11H7V8H6V7ZM9 6V4H7V6H9Z",fill:"#393F44"})})},{name:"drag",content:Object(f.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsx)("path",{d:"M4.6 1C5.4835 1 6.2 1.7165 6.2 2.6C6.2 3.4835 5.4835 4.2 4.6 4.2C3.7165 4.2 3 3.4835 3 2.6C3 1.7165 3.7165 1 4.6 1Z",fill:"#393F44"}),Object(f.jsx)("path",{d:"M6.2 8C6.2 7.1165 5.4835 6.4 4.6 6.4C3.7165 6.4 3 7.1165 3 8C3 8.8835 3.7165 9.6 4.6 9.6C5.4835 9.6 6.2 8.8835 6.2 8Z",fill:"#393F44"}),Object(f.jsx)("path",{d:"M12.6 8C12.6 7.1165 11.8835 6.4 11 6.4C10.1165 6.4 9.4 7.1165 9.4 8C9.4 8.8835 10.1165 9.6 11 9.6C11.8835 9.6 12.6 8.8835 12.6 8Z",fill:"#393F44"}),Object(f.jsx)("path",{d:"M12.6 2.6C12.6 1.7165 11.8835 1 11 1C10.1165 1 9.4 1.7165 9.4 2.6C9.4 3.4835 10.1165 4.2 11 4.2C11.8835 4.2 12.6 3.4835 12.6 2.6Z",fill:"#393F44"}),Object(f.jsx)("path",{d:"M4.6 11.8C5.4835 11.8 6.2 12.5165 6.2 13.4C6.2 14.2835 5.4835 15 4.6 15C3.7165 15 3 14.2835 3 13.4C3 12.5165 3.7165 11.8 4.6 11.8Z",fill:"#393F44"}),Object(f.jsx)("path",{d:"M12.6 13.4C12.6 12.5165 11.8835 11.8 11 11.8C10.1165 11.8 9.4 12.5165 9.4 13.4C9.4 14.2835 10.1165 15 11 15C11.8835 15 12.6 14.2835 12.6 13.4Z",fill:"#393F44"})]})}],x=function(e){var t=g.find((function(t){return t.name===e}));return t?t.content:null};var C=function(e){var t=e.transform||"";return Object(f.jsx)("div",{className:"Icon flex w-4 h-4 flex items-center justify-center transition-all transform ".concat(t&&t),children:x(e.icon)})},b=n(19);var m=function(e){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"Button",onClick:e.onClick,"data-tip":e.dataTip,"data-for":e.id,children:e.icon}),e.dataTip&&Object(f.jsx)(b.a,{id:e.id,effect:"solid",className:"Button__Tooltip"})]})};var p=function(e){return Object(f.jsxs)("div",{className:"LegendGradient flex flex-col px-3 pb-3",children:[function(){var t=100/(e.items.length-1),n="linear-gradient(90deg";for(var i in e.items)n="".concat(n,", ").concat(e.items[i].color," ").concat(t*i,"%");return n+=")",Object(f.jsx)("div",{className:"LegendGradient__gradient flex-none h-2 w-full",style:{background:n}})}(),Object(f.jsx)("div",{className:"LegendGradient__text flex w-full",children:e.items.map((function(e,t){return Object(f.jsx)("div",{className:"flex-auto text-center py-1.5 text-xs text-gray-550 first:text-left last:text-right",children:e.name},t)}))})]})};var v=function(e){return Object(f.jsx)("div",{className:"LegendChoropleth flex px-3 pb-3",children:e.items.map((function(e,t){return Object(f.jsxs)("div",{className:"LegendChoropleth__item flex flex-col flex-auto text-center",children:[Object(f.jsx)("div",{className:"LegendChoropleth__gradient flex-none h-2",style:{background:e.color}}),e.name&&Object(f.jsx)("div",{className:"LegendGradient__text py-1.5 text-xs text-gray-550",children:e.name})]},t)}))})};var O=function(e){return Object(f.jsx)("div",{className:"LegendBasic flex-col ml-5 px-3 pb-3",children:e.items.map((function(e,t){return Object(f.jsxs)("div",{className:"LegendBasic__item flex flex-auto items-center",children:[Object(f.jsx)("div",{className:"LegendBasic__gradient flex-none w-3 h-3 mr-1.5 rounded-full",style:{background:e.color}}),e.name&&Object(f.jsx)("div",{className:"LegendBasic__text text-xs py-0.5 text-gray-550",children:e.name})]},t)}))})},w=Object(j.c)((function(){return Object(f.jsx)("div",{className:"LegendItemDrag flex-none flex items-center mr-1",children:Object(f.jsx)(m,{id:"visibility",icon:Object(f.jsx)(C,{icon:"drag"})})})})),y=Object(j.b)((function(e){var t=e.content,n=t.id,i=t.name,s=t.type,a=t.items,l=t.visibility,o=t.collapse,c=e.onChangeVisibility,r=e.onChangeCollapse,d=e.onChangeInfo;return Object(f.jsxs)("div",{className:"LegendItem bg-white border border-black border-opacity-10 border-b-0 last:border-b",children:[Object(f.jsxs)("div",{className:"LegendItemHeader flex pt-3.5 px-3 pb-3",children:[Object(f.jsx)(w,{}),Object(f.jsx)("div",{className:"LegendItemTitle flex-auto block items-center text-sm text-gray-650 font-semibold truncate",children:i}),Object(f.jsxs)("div",{className:"LegendItemActions flex-none flex items-center gap-x-2 ml-1",children:[Object(f.jsx)(m,{id:"visibility",icon:Object(f.jsx)(C,{icon:l?"hide":"show"}),dataTip:l?"Hide Layer":"Show Layer",onClick:function(){return c(n)}}),Object(f.jsx)(m,{id:"info",icon:Object(f.jsx)(C,{icon:"info"}),dataTip:"Layer Info",onClick:function(){return d(n)}}),Object(f.jsx)(m,{id:"collapse",icon:Object(f.jsx)(C,{icon:"arrow-down",transform:o?"rotate-180":""}),dataTip:o?"Expand":"Collapse",onClick:function(){return r(n)}})]})]}),Object(f.jsx)(u.Collapse,{isOpened:!o,children:Object(f.jsx)("div",{className:"LegendItemContent",children:function(e){switch(e){case"gradient":return Object(f.jsx)(p,{items:a});case"choropleth":return Object(f.jsx)(v,{items:a});case"basic":return Object(f.jsx)(O,{items:a});default:return null}}(s)})})]})})),I=Object(j.a)((function(e){var t=e.items,n=e.onChangeVisibility,i=e.onChangeCollapse,s=e.onChangeInfo;return Object(f.jsx)("div",{className:"Legend w-full max-w-lg",children:t.map((function(e,t){return Object(f.jsx)(y,{index:t,item:e,content:e,onChangeVisibility:n,onChangeCollapse:i,onChangeInfo:s},"item-".concat(e.id))}))})}));var L=function(e){return Object(f.jsx)(I,{axis:"y",lockAxis:"y",useDragHandle:!0,items:e.items,onChangeVisibility:e.onChangeVisibility,onChangeCollapse:e.onChangeCollapse,onChangeInfo:e.onChangeInfo,onSortEnd:e.onChangeOrder})},N=n(9),k=n.n(N);k.a.setAppElement("#root");var M=function(e){return Object(f.jsx)(k.a,{isOpen:e.isOpen,onRequestClose:function(){return e.onChangeInfo(null)},className:"w-full max-h-full overflow-auto lg:w-1/2 bg-white p-2 md:p-6 outline-none",overlayClassName:"fixed top-0 p-2 w-full h-screen flex items-center justify-center bg-black bg-opacity-60",children:Object(f.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}})})},_=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={dataUrl:"https://raw.githubusercontent.com/Vizzuality/front-end-code-challenge/master/data.json",legendItems:[],isModalOpen:!1,modalContent:""},e.onChangeVisibility=e.onChangeVisibility.bind(Object(r.a)(e)),e.onChangeCollapse=e.onChangeCollapse.bind(Object(r.a)(e)),e.onChangeOrder=e.onChangeOrder.bind(Object(r.a)(e)),e.onChangeInfo=e.onChangeInfo.bind(Object(r.a)(e)),e}return Object(c.a)(n,[{key:"onChangeVisibility",value:function(e){var t=this.state.legendItems.map((function(t){return t.id===e&&(t.visibility=!t.visibility),t}));this.setState({legendItems:t})}},{key:"onChangeCollapse",value:function(e){var t=this.state.legendItems.map((function(t){return t.id===e&&(t.collapse=!t.collapse),t}));this.setState({legendItems:t})}},{key:"onChangeOrder",value:function(e){if(e.newIndex!==e.oldIndex){var t=this.state.legendItems,n=t.splice(e.oldIndex,1);t.splice(e.newIndex,0,n[0]),this.setState({legendItems:t})}}},{key:"onChangeInfo",value:function(e){var t;this.setState({isModalOpen:e,modalContent:null===(t=this.state.legendItems.find((function(t){return t.id===e})))||void 0===t?void 0:t.description})}},{key:"setLegendItems",value:function(e){var t=e.filter((function(e){return"timeline"!==e.type})).map((function(e){return e.visibility=!0,e.collapse=!1,e}));this.setState({legendItems:t})}},{key:"componentDidMount",value:function(){var e=this;fetch(this.state.dataUrl).then((function(e){if(e.ok)return e.json();console.log("Oops! There as an error ".concat(e.status,": ").concat(e.statusText))})).then((function(t){e.setLegendItems(t)})).catch((function(e){console.log("Error:",e)}))}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"App w-full min-h-screen p-5 bg-gray-680",children:[this.state.legendItems.length>0&&Object(f.jsx)(L,{items:this.state.legendItems,onChangeVisibility:this.onChangeVisibility,onChangeCollapse:this.onChangeCollapse,onChangeOrder:this.onChangeOrder,onChangeInfo:this.onChangeInfo}),Object(f.jsx)(M,{isOpen:this.state.isModalOpen,onChangeInfo:this.onChangeInfo,content:this.state.modalContent})]})}}]),n}(s.a.Component),V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,a=t.getLCP,l=t.getTTFB;n(e),i(e),s(e),a(e),l(e)}))};l.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(_,{})}),document.getElementById("root")),V()}},[[40,1,2]]]);
//# sourceMappingURL=main.bf76d32c.chunk.js.map